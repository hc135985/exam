[{"title":"实现发布订阅模式","questions_id":"aihpv-1ru212-wun87-0hli3","json_path":"aihpv-1ru212-wun87-0hli3.json","subject_text":"项目实战","subject_id":"94sjh6-lnlxe","exam_id":"jpg8y9-zbzt7o-jpvuhf-fwnjvr","exam_name":"周考2","user_name":"w916peach","user_id":"axg8t2-oroeja","questions_type_text":"手写代码","questions_type_id":"v8i73-r8oai","questions_stem":"现在有一个类 \n\n```\nclass Watch{\n  on(){\n   // 实现该方法逻辑\n  }\n  emit(){\n   // 实现该方法逻辑 \n  }\n}\n\n//调用示例如下：\nconst w1 = new Watch();\nw1.on('www',(options) => {\n  console.log(options)\n});\nw1.emit('www','success');\n\n// 最后的打印结果是  success\n\n```\n\n请实现要求的逻,可以对该类进行任意修改","student_answer":"class Watch {\n  handlers = {}// 首先定义一个事件容器，用来装事件数组\n  on(type, handler) {// 事件添加方法，参数有事件名和事件方法\n    // 首先判断handlers内有没有type事件容器，没有则创建一个新数组容器\n    if (!(type in this.handlers)) {\n      this.handlers[type] = []\n    }\n    this.handlers[type].push(handler)   // 将事件存入\n  }\n\n  dispatchEvent (type, ...params) {  // 触发事件两个参数（事件名，参数）\n    // 若没有注册该事件则抛出错误\n    if (!(type in this.handlers)) {\n      return new Error('未注册该事件')\n    }\n    this.handlers[type].forEach(handler => { // 便利触发\n      handler(...params)\n    })\n  }\n// 事件移除参数（事件名，删除的事件，若无第二个参数则删除该事件的订阅和发布）\n   emit (type, handler) {\n      // 无效事件抛出\n      if (!(type in this.handlers)) {\n        return new Error('无效事件')\n      }\n      if (!handler) {\n        // 直接移除事件\n        delete this.handlers[type]\n      } else {\n        const idx = this.handlers[type].findIndex(ele => ele === handler)\n        // 抛出异常事件\n        if (idx === undefined) {\n          return new Error('无该绑定事件')\n        }\n        // 移除事件\n        this.handlers[type].splice(idx, 1)\n        if (this.handlers[type].length === 0) {\n          delete this.handlers[type]\n        }\n      }\n    }\n}"},{"title":"实现多维数组转换为一维数组","questions_id":"60gn1-9nj3mi-hv4xz-t6ecp","json_path":"60gn1-9nj3mi-hv4xz-t6ecp.json","subject_text":"javaScript下","subject_id":"wl5yk-38c0g","exam_id":"ukmp9b-radddj-ogwdr-nw3ane","exam_name":"周考3","user_name":"renyuliang","user_id":"bsz88g-071r5","questions_type_text":"手写代码","questions_type_id":"v8i73-r8oai","questions_stem":"封装一个函数可以使得n维数组转换为1维数组，输出","student_answer":"    let  data=[[1,2],7,8,[[[111,222]]],[1,1,1],4,5,6];\n    let  res=[];\n    function to(arr){\n       arr.forEach?(arr.forEach(item=>{\n          item.forEach?to(item):res.push(item)\n       })):res.push(arr);\n         return res\n     }\n    to(data);\n    console.log(res)"},{"title":"完成 convert(list) 函数，实现将 list 转为 tree","questions_id":"lahic9-5l9ax7-2c5a09-ukz1o","json_path":"lahic9-5l9ax7-2c5a09-ukz1o.json","subject_text":"javaScript下","subject_id":"wl5yk-38c0g","exam_id":"ukmp9b-radddj-ogwdr-nw3ane","exam_name":"周考3","user_name":"liuyu","user_id":"kqpvys-hpzkdt","questions_type_text":"手写代码","questions_type_id":"v8i73-r8oai","questions_stem":"\n```\n\n/**\n * @param list {object[]}, \n * @param parentKey {string}\n * @param currentKey {string}\n * @param rootValue {any}\n * @return object\n */\nfunction convert(list, parentKey, currentKey, rootValue) {\n  let tree = {}\n    \n  return tree\n}\n\n接收\nconst list = [\n  {\n    \"id\": 19,\n    \"parentId\": 0,\n  },\n  {\n    \"id\": 18,\n    \"parentId\": 16,\n  },\n  {\n    \"id\": 17,\n    \"parentId\": 16,\n  },\n  {\n    \"id\": 16,\n    \"parentId\": 0,\n  }\n];\n\n返回\nconst result = convert(list, 'parentId', 'id', 0);\nconst tree = {\n  \"id\": 0,\n  \"children\": [\n    {\n      \"id\": 19,\n      \"parentId\": 0\n    },\n    {\n      \"id\": 16,\n      \"parentId\": 0,\n      \"children\": [\n        {\n          \"id\": 18,\n          \"parentId\": 16\n        },\n        {\n          \"id\": 17,\n          \"parentId\": 16\n        }\n      ]\n    }\n  ]\n}\n\n\n```\n\n\n\n\n\n\n\n\n\n\n\n","student_answer":"function convert(list,parentKey, currentKey,rootValue){ \n    convert(rootValue);\n    function exists(list, parentKey){\n        for(var i=0; i< rootValue.length; i++){\n            if ( rootValue[i][id] == parentKey){\n                return true;\n            }\n        }\n        return false;\n    }\n    var nodes = [];\n    for(var i=0; i<rootValue.length; i++){\n         var row = rootValue[i];\n         if (!exists(rootValue, row[parentKey])){\n              nodes.push(row);\n         }\n    }\n    var pNodes = [];\n    for(var i=0; i<nodes.length; i++){\n        pNodes.push(nodes[i]);\n    }\n    while(pNodes.length){\n        var node = pNodes.shift();\n        for(var i=0; i<rootValue.length; i++){\n            var row = rootValue[i];\n            if (row[parentKey] == node[list]){\n                if (node.items){\n                       node.items.push(row);\n                  } else {\n                       node.items = [row];\n                  }\n                  pNodes.push(row);\n             }\n        }\n   }\n   return nodes;\n}\nfunction convert(rootValue){\n    $.each(rootValue,function(i,e){\n        e['title'] = e.NAME;\n        e['isRoot'] = (e.PARENT_ID == '-1');\n        e['isActive'] = (e.ENABLE_STATUS == '01');\n    })    \n    return rootValue;\n}"},{"title":"实现一个评星方法","questions_id":"tak6bp-2bpj3-xh6jpg-elkb8u","json_path":"tak6bp-2bpj3-xh6jpg-elkb8u.json","subject_text":"javaScript下","subject_id":"wl5yk-38c0g","exam_id":"ukmp9b-radddj-ogwdr-nw3ane","exam_name":"周考3","user_name":"liuyu","user_id":"kqpvys-hpzkdt","questions_type_text":"手写代码","questions_type_id":"v8i73-r8oai","questions_stem":"实现一个评星方法\n说明\n* 可根据传入的评分和总数，返回评星结果（用 ★ 和 ☆ 描述）\n* 评分必选项，四舍五入，总数可选，大于0的整数，默认为5\n* 对于评分为空或小于0、评分大于总数、总数小于0或总数非整数的情况，返回'errror'\n示例\n```\ngetRate(4); // ★★★★☆\ngetRate(4, 8); // ★★★★☆☆☆☆\ngetRate(3.4); //  ★★★☆☆\ngetRate(5, 2); // 'error'\ngetRate(-2); // 'error'\ngetRate(3, 5.5); // 'error'\n```\n\n\n\n\n\n\n\n\n\n\n\n","student_answer":""}]