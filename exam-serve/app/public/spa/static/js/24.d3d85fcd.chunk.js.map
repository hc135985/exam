{"version":3,"sources":["utils/utils.js","model/identity/index.js"],"names":["getUrlParams","url","arguments","length","undefined","window","location","href","d","decodeURIComponent","splitArr","split","queryString","search","slice","obj","arr","i","a","paramNum","paramName","replace","v","paramValue","push","saveRef","instance","name","node","parseTime","time","cFormat","date","format","parseInt","Date","formatObj","y","getFullYear","m","getMonth","getDate","h","getHours","getMinutes","s","getSeconds","getDay","result","key","value","showTime","modulo","Math","round","hours","floor","minutes","console","log","seconds","concat","createAction","type","action","Object","_home_tao_www_react_exam_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_0__","__webpack_exports__","namespace","state","identitys","nowIdentityIndex","nowIndentity","viewData","reducers","changeState","_home_tao_www_react_exam_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_1__","effects","showIdentity","_home_tao_www_react_exam_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default","mark","_ref","_ref2","_ref$nowIdentityIndex","call","put","identity_id","wrap","_context","prev","next","sent","code","data","stop","this","getViewFromIdentity","_ref3","_ref4","_context2"],"mappings":"uQAIO,SAASA,IAAyC,IAA5BC,EAA4BC,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAtBG,OAAOC,SAASC,KAC3CC,EAAIC,mBACJC,EAAWT,EAAMA,EAAIU,MAAM,KAAO,GACpCC,EAAcX,EAAMS,EAASA,EAASP,OAAS,GAAKE,OAAOC,SAASO,OAAOC,MAAM,GAC/EC,EAAM,GACZ,GAAIH,EAGF,IADA,IAAMI,GADNJ,EAAcA,EAAYD,MAAM,KAAK,IACbA,MAAM,KACrBM,EAAI,EAAGA,EAAID,EAAIb,OAAQc,GAAK,EAAG,CACtC,IAAMC,EAAIF,EAAIC,GAAGN,MAAM,KACnBQ,OAAQ,EACNC,EAAYF,EAAE,GAAGG,QAAQ,UAAW,SAACC,GAEzC,OADAH,EAAWG,EAAER,MAAM,GAAI,GAChB,KAEHS,EAA+B,qBAAVL,EAAE,GAAsB,GAAKA,EAAE,GACtDH,EAAIK,IACwB,kBAAnBL,EAAIK,KACbL,EAAIK,GAAaZ,EAAE,CAACO,EAAIK,MAEF,qBAAbD,EACTJ,EAAIK,GAAWI,KAAKhB,EAAEe,IAEtBR,EAAIK,GAAWD,GAAYX,EAAEe,IAG/BR,EAAIK,GAAaZ,EAAEe,GAIzB,OAAOR,EAMF,SAASU,EAAQC,EAAUC,GAChC,OAAO,SAACC,GACNF,EAASC,GAAQC,GAUd,SAASC,EAAUC,EAAMC,GAC9B,GAAyB,IAArB7B,UAAUC,OACZ,OAAO,KAGT,IACI6B,EADEC,EAASF,GAAW,0BAEN,kBAHpBD,EAAOI,SAASJ,IAIdE,EAAOF,GAEoB,MAAtB,GAAKA,GAAM3B,SAAe2B,EAAwB,IAAjBI,SAASJ,IAC/CE,EAAO,IAAIG,KAAKL,IAElB,IAAMM,EAAY,CAChBC,EAAGL,EAAKM,cACRC,EAAGP,EAAKQ,WAAa,EACrBhC,EAAGwB,EAAKS,UACRC,EAAGV,EAAKW,WACR1B,EAAGe,EAAKY,aACRC,EAAGb,EAAKc,aACR5B,EAAGc,EAAKe,UAEV,OAAOd,EAAOZ,QAAQ,sBAAuB,SAAC2B,EAAQC,GACpD,IAAIC,EAAQd,EAAUa,GAEtB,MAAY,MAARA,EACK,CAAC,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,UAAKC,IAEzCF,EAAO7C,OAAS,GAAK+C,EAAQ,KAC/BA,EAAQ,IAAMA,GAETA,GAAS,KA4Cb,SAASC,EAASnB,GACvB,IAGIoB,EAHeC,KAAKC,MAAMtB,EAAO,KAGZ,MAErBuB,EAAQF,KAAKG,MAAMJ,EAAM,MAC7BA,GAAe,KAEf,IAAIK,EAAUJ,KAAKG,MAAMJ,EAAS,IAElCM,QAAQC,IAAIP,GAEZ,IAAIQ,EAAUR,EAAS,GAEvB,SAAAS,OAAUN,EAAV,KAAAM,OAAmBJ,EAAnB,KAAAI,OAA8BD,GAIzB,SAASE,EAAaC,EAAKC,GAChC,OAAOC,OAAAC,EAAA,EAAAD,CAAA,CACLF,QAAQC,4FC7IGG,EAAA,SACXC,UAAU,WACVC,MAAM,CACFC,UAAU,GACVC,kBAAkB,EAClBC,aAAa,GACbC,SAAS,IAEbC,SAAS,CACLC,YADK,SACON,EAAML,GACd,OAAOC,OAAAW,EAAA,EAAAX,CAAA,GACAI,EACAL,KAIfa,QAAQ,CACHC,aADGC,EAAA7D,EAAA8D,KAAA,SAAAF,EAAAG,EAAAC,GAAA,IAAAC,EAAAZ,EAAAa,EAAAC,EAAArC,EAAAsB,EAAAE,EAAAc,EAAA,OAAAP,EAAA7D,EAAAqE,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,OAEe,OAFfP,EAAAF,EACWV,wBADX,IAAAY,EAC4B,EAD5BA,EACgCC,EADhCF,EACgCE,KAAKC,EADrCH,EACqCG,IADrCG,EAAAE,KAAA,EAEqBN,EAAKN,gBAF1B,UAGmB,KADb9B,EAFNwC,EAAAG,MAGUC,KAHV,CAAAJ,EAAAE,KAAA,SAMI,OAFMpB,EAAYtB,EAAO6C,KACnBrB,EAAeF,EAAUC,GALnCiB,EAAAE,KAAA,GAMUL,EAAIvB,YAAa,cAAc,CAACQ,YAAUC,mBAAiBC,kBANrE,QAQI,OADOc,EAAed,EAAfc,YAPXE,EAAAE,KAAA,GAQUL,EAAIvB,YAAa,sBAAsB,CAACwB,iBARlD,yBAAAE,EAAAM,SAAAhB,EAAAiB,QAWHC,oBAXGjB,EAAA7D,EAAA8D,KAAA,SAAAgB,EAAAC,EAAAC,GAAA,IAAAZ,EAAAF,EAAAC,EAAArC,EAAAyB,EAAA,OAAAM,EAAA7D,EAAAqE,KAAA,SAAAY,GAAA,cAAAA,EAAAV,KAAAU,EAAAT,MAAA,OAYe,OADGJ,EAXlBW,EAWkBX,YAAcF,EAXhCc,EAWgCd,KAAKC,EAXrCa,EAWqCb,IAXrCc,EAAAT,KAAA,EAYqBN,EAAKY,sBAAoBV,GAZ9C,UAamB,KADbtC,EAZNmD,EAAAR,MAaUC,KAbV,CAAAO,EAAAT,KAAA,QAeI,OADMjB,EAAWzB,EAAO6C,KAd5BM,EAAAT,KAAA,EAeUL,EAAIvB,YAAa,cAAc,CAACW,cAf1C,wBAAA0B,EAAAL,SAAAE,EAAAD","file":"static/js/24.d3d85fcd.chunk.js","sourcesContent":["/**\n * 获取url中的参数\n * @see https://www.sitepoint.com/get-url-parameters-with-javascript/\n */\nexport function getUrlParams(url = window.location.href) {\n  const d = decodeURIComponent;\n  const splitArr = url ? url.split('?') : [];\n  let queryString = url ? splitArr[splitArr.length - 1] : window.location.search.slice(1);\n  const obj = {};\n  if (queryString) {\n    queryString = queryString.split('#')[0]; // eslint-disable-line\n    const arr = queryString.split('&');\n    for (let i = 0; i < arr.length; i += 1) {\n      const a = arr[i].split('=');\n      let paramNum;\n      const paramName = a[0].replace(/\\[\\d*\\]/, (v) => {\n        paramNum = v.slice(1, -1);\n        return '';\n      });\n      const paramValue = typeof (a[1]) === 'undefined' ? '' : a[1];\n      if (obj[paramName]) {\n        if (typeof obj[paramName] === 'string') {\n          obj[paramName] = d([obj[paramName]]);\n        }\n        if (typeof paramNum === 'undefined') {\n          obj[paramName].push(d(paramValue));\n        } else {\n          obj[paramName][paramNum] = d(paramValue);\n        }\n      } else {\n        obj[paramName] = d(paramValue);\n      }\n    }\n  }\n  return obj;\n}\n\n/**\n * 保存组件ref\n */\nexport function saveRef(instance, name) {\n  return (node) => {\n    instance[name] = node; // eslint-disable-line\n  };\n}\n\n/**\n * 格式化时间\n * @param time\n * @param cFormat\n * @returns {*}\n */\nexport function parseTime(time, cFormat) {\n  if (arguments.length === 0) {\n    return null;\n  }\n  time = parseInt(time)\n  const format = cFormat || '{y}-{m}-{d} {h}:{i}:{s}';\n  let date;\n  if (typeof time === 'object') {\n    date = time;\n  } else {\n    if (('' + time).length === 10) time = parseInt(time) * 1000;\n    date = new Date(time);\n  }\n  const formatObj = {\n    y: date.getFullYear(),\n    m: date.getMonth() + 1,\n    d: date.getDate(),\n    h: date.getHours(),\n    i: date.getMinutes(),\n    s: date.getSeconds(),\n    a: date.getDay()\n  };\n  return format.replace(/{(y|m|d|h|i|s|a)+}/g, (result, key) => {\n    let value = formatObj[key];\n    // Note: getDay() returns 0 on Sunday\n    if (key === 'a') {\n      return ['日', '一', '二', '三', '四', '五', '六'][value];\n    }\n    if (result.length > 0 && value < 10) {\n      value = '0' + value;\n    }\n    return value || 0;\n  });\n}\n\n/**\n * 格式化时间的可读性\n * @param time\n * @param option\n * @returns {*}\n */\nexport function formatTime(time, option) {\n  time = +time * 1000;\n  const d = new Date(time);\n  const now = Date.now();\n\n  const diff = (now - d) / 1000;\n\n  if (diff < 30) {\n    return '刚刚';\n  } else if (diff < 3600) {\n    // less 1 hour\n    return Math.ceil(diff / 60) + '分钟前';\n  } else if (diff < 3600 * 24) {\n    return Math.ceil(diff / 3600) + '小时前';\n  } else if (diff < 3600 * 24 * 2) {\n    return '1天前';\n  }\n  if (option) {\n    return parseTime(time, option);\n  } else {\n    return (\n      d.getMonth() +\n      1 +\n      '月' +\n      d.getDate() +\n      '日' +\n      d.getHours() +\n      '时' +\n      d.getMinutes() +\n      '分'\n    );\n  }\n}\n\nexport function showTime(date) {\n  var totalSeconds = Math.round(date / 1000);\n  // var days = Math.floor(totalSeconds / (60 * 60 * 24));\n  //取模（余数）\n  var modulo = totalSeconds % (60 * 60 * 24);\n  //小时数\n  var hours = Math.floor(modulo / (60 * 60));\n  modulo = modulo % (60 * 60);\n  //分钟\n  var minutes = Math.floor(modulo / 60);\n\n  console.log(modulo)\n  //秒\n  var seconds = modulo % 60;\n\n  return `${hours}:${minutes}:${seconds}`;\n}\n\n// 创建action\nexport function createAction(type,action){\n  return {\n    type,...action\n  }\n}\n\n\n\n","import {\n    showIdentity,//所有的身份接口\n    getViewFromIdentity, // 该身份的视图权限\n} from '../../service/userManger'\nimport {\n    createAction\n} from '../../utils/utils'\nexport default {\n    namespace:'identity',\n    state:{\n        identitys:[],//所有的身份数据\n        nowIdentityIndex:-1,// 当前选中的身份的索引\n        nowIndentity:{}, // 当前选中的身份数据\n        viewData:[],// 当前选中身份的视图数据\n    },\n    reducers:{\n        changeState(state,action){ // 改变state中的数据\n            return {\n                ...state,\n                ...action\n            }\n        }\n    },\n    effects:{\n        *showIdentity({nowIdentityIndex=0},{call,put}){\n            const result = yield call(showIdentity);\n            if(result.code === 1){\n                const identitys = result.data;\n                const nowIndentity = identitys[nowIdentityIndex];\n                yield put(createAction('changeState',{identitys,nowIdentityIndex,nowIndentity}));   \n                const {identity_id} = nowIndentity;\n                yield put(createAction('getViewFromIdentity',{identity_id}))                \n            }\n        },\n        *getViewFromIdentity({identity_id},{call,put}){\n            const result = yield call(getViewFromIdentity,identity_id);\n            if(result.code === 1){\n                const viewData = result.data;\n                yield put(createAction('changeState',{viewData}));\n            }\n        }\n    }\n}"],"sourceRoot":""}